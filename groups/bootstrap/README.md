# bootstrap

Provisions transient infrastructure used to bootstrap the cluster

## Terraform variables

| Name                          | Description                                                                                                                                                                                                                                                                                                                                                                                                       | Default                                  | Example                                                                                                                                                    | Notes        |
| ----------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ |
| account_name                  | The name of the AWS account we're using                                                                                                                                                                                                                                                                                                                                                                           | `-`                                      | `development`                                                                                                                                              | -            |
| ami_owner_id                  | The ID of the AMI owner                                                                                                                                                                                                                                                                                                                                                                                           | `-`                                      | `12345`                                                                                                                                                    | -            |
| ami_version_pattern           | The pattern to match AMI version to                                                                                                                                                                                                                                                                                                                                                                               | `\\d.\\d.\\d`                            | `1.2.3`                                                                                                                                                    | -            |
| elastic_search_service_group  | The Linux group name for association with elasticsearch configuration files                                                                                                                                                                                                                                                                                                                                       | `elasticsearch`                          | `my_group`                                                                                                                                                 | -            |
| elastic_search_service_user   | The Linux username for ownership of elasticsearch configuration files                                                                                                                                                                                                                                                                                                                                             | `elasticsearch`                          | `my_user`                                                                                                                                                  | -            |
| environment                   | The environment name to be used when creating AWS resources                                                                                                                                                                                                                                                                                                                                                       | `-`                                      | `my_environment`                                                                                                                                           | -            |
| instance_type                 | The instance type to use                                                                                                                                                                                                                                                                                                                                                                                          | `t3.medium`                              | `t3.large`                                                                                                                                                 | -            |
| instance_type_heap_allocation | A map used to determine the Java heap allocation in gigabytes, based on instance type. I.e. 50% of what's available                                                                                                                                                                                                                                                                                               | `{"t3.medium" = "2"}`                    | `{"t3.medium" = "2","t3.large" = "4"}`                                                                                                                     | -            |
| lvm_block_devices             | A list of objects representing LVM block devices; each LVM volume group is assumed to contain a single physical volume and each logical volume is assumed to belong to a single volume group; the filesystem for each logical volume will be expanded to use all available space within the volume group using the filesystem resize tool specified; block device configuration applies only on resource creation | `-`                                      | `[{aws_volume_size_gb: "10",filesystem_resize_tool: "xfs_growfs",lvm_logical_volume_device_node: "/dev/abc",lvm_physical_volume_device_node: "/dev/def"}]` | -            |
| region                        | The AWS region in which resources will be administered                                                                                                                                                                                                                                                                                                                                                            | `-`                                      | `eu-west-2`                                                                                                                                                | -            |
| repository_name               | The name of the repository in which we're operating                                                                                                                                                                                                                                                                                                                                                               | `logging-stack`                          | `-`                                                                                                                                                        | `deprecated` |
| root_volume_size              | The size of the root volume in GiB; set this value to 0 to preserve the size specified in the AMI metadata. This value should not be smaller than the size specified in the AMI metadata and used by the root volume snapshot. The filesystem will be expanded automatically to use all available space for the volume and an XFS filesystem is assumed                                                           | `0`                                      | `10`                                                                                                                                                       | -            |
| service                       | The service name to be used when creating AWS resources                                                                                                                                                                                                                                                                                                                                                           | `logging`                                | `-`                                                                                                                                                        | -            |
| team                          | The team responsible for administering the instance                                                                                                                                                                                                                                                                                                                                                               | `-`                                      | `platform`                                                                                                                                                 | -            |
| user_data_merge_strategy      | Merge strategy to apply to user-data sections for cloud-init                                                                                                                                                                                                                                                                                                                                                      | `list(append)+dict(recurse_array)+str()` | `-`                                                                                                                                                        | -            |
