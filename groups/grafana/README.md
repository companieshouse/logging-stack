# grafana

Provisions Grafana

## Terraform variables

| Name                        | Description                                                                                                                                                                                                                                                                                                                                                                   | Default                                  | Example                                                                                                                                                    | Notes        |
| --------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ |
| account_name                | The name of the AWS account we're using                                                                                                                                                                                                                                                                                                                                       | `-`                                      | `development`                                                                                                                                              | -            |
| ami_owner_id                | The ID of the AMI owner                                                                                                                                                                                                                                                                                                                                                       | `-`                                      | `12345`                                                                                                                                                    | -            |
| environment                 | The environment name to be used when creating AWS resources                                                                                                                                                                                                                                                                                                                   | `-`                                      | `my_environment`                                                                                                                                           | -            |
| grafana_ami_version_pattern | The pattern with which to match grafana AMIs                                                                                                                                                                                                                                                                                                                                  | `\\d.\\d.\\d`                            | `1.2.3`                                                                                                                                                    | -            |
| grafana_instance_count      | The number of grafana instances to provision                                                                                                                                                                                                                                                                                                                                  | `1`                                      | `-`                                                                                                                                                        | -            |
| grafana_instance_type       | The instance type to use for grafana instances                                                                                                                                                                                                                                                                                                                                | `t3.medium`                              | `-`                                                                                                                                                        | -            |
| grafana_lvm_block_devices   | LVM block devices for grafana nodes                                                                                                                                                                                                                                                                                                                                           | `-`                                      | `[{aws_volume_size_gb: "10",filesystem_resize_tool: "xfs_growfs",lvm_logical_volume_device_node: "/dev/abc",lvm_physical_volume_device_node: "/dev/def"}]` | -            |
| grafana_root_volume_size    | The size of the root volume for grafana instances in GiB; set this value to 0 to preserve the size specified in the AMI metadata. This value should not be smaller than the size specified in the AMI metadata and used by the root volume snapshot. The filesystem will be expanded automatically to use all available space for the volume and an XFS filesystem is assumed | `0`                                      | `-`                                                                                                                                                        | -            |
| grafana_service_group       | The Linux group name for association with grafana configuration files                                                                                                                                                                                                                                                                                                         | `grafana`                                | `my_group`                                                                                                                                                 | -            |
| grafana_service_user        | The Linux username for ownership of grafana configuration files                                                                                                                                                                                                                                                                                                               | `grafana`                                | `my_user`                                                                                                                                                  | -            |
| ldap_auth_use_ssl           | Ldap SSL configuration                                                                                                                                                                                                                                                                                                                                                        | `false`                                  | `-`                                                                                                                                                        | -            |
| ldap_auth_start_tls         | Ldap TLS configuration                                                                                                                                                                                                                                                                                                                                                        | `false`                                  | `-`                                                                                                                                                        | -            |
| ldap_auth_ssl_skip_verify   | Ldap SSL cert validation configuration                                                                                                                                                                                                                                                                                                                                        | `true`                                   | `-`                                                                                                                                                        | -            |
| region                      | The AWS region in which resources will be administered                                                                                                                                                                                                                                                                                                                        | `-`                                      | `eu-west-2`                                                                                                                                                | -            |
| repository_name             | The name of the repository in which we're operating                                                                                                                                                                                                                                                                                                                           | `-`                                      | `logging-stack`                                                                                                                                            | `deprecated` |
| service                     | The service name to be used when creating AWS resources                                                                                                                                                                                                                                                                                                                       | `logging`                                | `-`                                                                                                                                                        | -            |
| team                        | The team responsible for administering the instance                                                                                                                                                                                                                                                                                                                           | `-`                                      | `platform`                                                                                                                                                 | -            |
| user_data_merge_strategy    | Merge strategy to apply to user-data sections for cloud-init                                                                                                                                                                                                                                                                                                                  | `list(append)+dict(recurse_array)+str()` | `-`                                                                                                                                                        | -            |
