# kibana

Provisions Kibana

## Terraform variables

| Name                         | Description                                                                                                                                                                                                                                                                                                                                                                  | Default                                  | Example                                                                                                                                                                                                                                                                                                           | Notes        |
| ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------ |
| account_name                 | The name of the AWS account we're using                                                                                                                                                                                                                                                                                                                                      | `-`                                      | `development`                                                                                                                                                                                                                                                                                                     | -            |
| ami_owner_id                 | The ID of the AMI owner                                                                                                                                                                                                                                                                                                                                                      | `-`                                      | `12345`                                                                                                                                                                                                                                                                                                           | -            |
| ami_version_pattern          | The pattern with which to match kibana AMIs                                                                                                                                                                                                                                                                                                                                  | `\\d.\\d.\\d`                            | `XXX`                                                                                                                                                                                                                                                                                                             | -            |
| elastic_search_service_group | The Linux group name for association with elasticsearch configuration files                                                                                                                                                                                                                                                                                                  | `elasticsearch`                          | `my_group`                                                                                                                                                                                                                                                                                                        | -            |
| elastic_search_service_user  | The Linux username for ownership of elasticsearch configuration files                                                                                                                                                                                                                                                                                                        | `elasticsearch`                          | `my_user`                                                                                                                                                                                                                                                                                                         | -            |
| environment                  | The environment name to be used when creating AWS resources                                                                                                                                                                                                                                                                                                                  | `-`                                      | `my_environment`                                                                                                                                                                                                                                                                                                  | -            |
| instance_count               | The number of kibana instances to provision                                                                                                                                                                                                                                                                                                                                  | `-`                                      | `1`                                                                                                                                                                                                                                                                                                               | -            |
| instance_type                | The instance type to use for kibana instances                                                                                                                                                                                                                                                                                                                                | `-`                                      | `t3.medium`                                                                                                                                                                                                                                                                                                       | -            |
| kibana_lvm_block_devices     | LVM block devices for kibana nodes                                                                                                                                                                                                                                                                                                                                           | `-`                                      | `[{aws_volume_size_gb: "10",filesystem_resize_tool: "xfs_growfs",lvm_logical_volume_device_node: "/dev/abc",lvm_physical_volume_device_node: "/dev/def"},{aws_volume_size_gb: "10",filesystem_resize_tool: "xfs_growfs",lvm_logical_volume_device_node: "/dev/abc",lvm_physical_volume_device_node: "/dev/def"}]` | -            |
| kibana_service_group         | The Linux group name for association with kibana configuration files                                                                                                                                                                                                                                                                                                         | `kibana`                                 | `my_group`                                                                                                                                                                                                                                                                                                        | -            |
| kibana_service_user          | The Linux username for ownership of kibana configuration files                                                                                                                                                                                                                                                                                                               | `kibana`                                 | `my_user`                                                                                                                                                                                                                                                                                                         | -            |
| region                       | The AWS region in which resources will be administered                                                                                                                                                                                                                                                                                                                       | `-`                                      | `eu-west-2`                                                                                                                                                                                                                                                                                                       | -            |
| repository_name              | The name of the repository in which we're operating                                                                                                                                                                                                                                                                                                                          | `-`                                      | `logging-stack`                                                                                                                                                                                                                                                                                                   | `deprecated` |
| roles                        | The roles to assign to kibana nodes                                                                                                                                                                                                                                                                                                                                          | `[]`                                     | `["role_a","role_b"]`                                                                                                                                                                                                                                                                                             | -            |
| root_volume_size             | The size of the root volume for kibana instances in GiB; set this value to 0 to preserve the size specified in the AMI metadata. This value should not be smaller than the size specified in the AMI metadata and used by the root volume snapshot. The filesystem will be expanded automatically to use all available space for the volume and an XFS filesystem is assumed | `0`                                      | `-`                                                                                                                                                                                                                                                                                                               | -            |
| service                      | The service name to be used when creating AWS resources                                                                                                                                                                                                                                                                                                                      | `logging`                                | `-`                                                                                                                                                                                                                                                                                                               | -            |
| team                         | The team responsible for administering the instance                                                                                                                                                                                                                                                                                                                          | `-`                                      | `platform`                                                                                                                                                                                                                                                                                                        | -            |
| user_data_merge_strategy     | Merge strategy to apply to user-data sections for cloud-init                                                                                                                                                                                                                                                                                                                 | `list(append)+dict(recurse_array)+str()` | `-`                                                                                                                                                                                                                                                                                                               | -            |
